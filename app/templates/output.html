<!DOCTYPE html>

<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- <link rel="icon" href="http://getbootstrap.com/favicon.ico"> -->

    <title>runSmartr</title>

    <!-- Bootstrap core CSS -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../static/css/cover.css" rel="stylesheet">

    <!-- Styles for Mapbox.js map -->
    <link href="https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.css" rel="stylesheet" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
  </head>

  <body>

    <div class="site-wrapper">
      <div class="site-wrapper-inner">

        <div class="masthead clearfix">
          <div class="inner">
            <nav>
              <ul class="nav masthead-nav">
                <li><a href="#">Slides</a></li>
              </ul>
            </nav>
          </div>
        </div>

        <div class="cover-container">

	  <div id="map"></div>

	  <div class="inner sidebox">
            <h1 class="cover-heading">runSmartr</h1>

	    <!-- Form to input run parameters -->
	    <form action="" method="post" name="input">
	      <ul class="input">
		<li>{{ form.address(size=30) }}</li><br>
		<li>{{ form.distance(size=4) }}</li>
		<li>
		  <ul class="inputunits">
		    {% for subfield in form.units %}
		    <li>{{ subfield }} {{ subfield.label }}</li>
		    {% endfor %}
		  </ul>
		</li>
	      </ul>
              <p class="lead">
		<input class="btn btn-lg btn-default" type="submit" value="find route!">
              </p>
	    </form>

	  </div>

        </div>
      </div>
    </div>

    <!-- Bootstrap core JavaScript
	 ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../static/js/jquery.min.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <!-- Mapbox.js -->
    <script src="https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.js"></script>
    <!-- Geocomplete -->
    <script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"></script>
    <script src="../static/js/jquery.geocomplete.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../static/js/ie10-viewport-bug-workaround.js"></script>

    <script type="text/javascript">
    
function sizeMap(){
    $("#map").height($("body").height());
}

function addMap(lat, lon, zoom){
    L.mapbox.accessToken = 'pk.eyJ1IjoiYW5keWFsbWFuZGh1bnRlciIsImEiOiJLOUh5aS1vIn0.zFS519161_PwwjqlyMWezA';
    var map = L.mapbox.map('map', 'andyalmandhunter.l52ai08p', {
        zoomControl: false
    }).setView([lat, lon], zoom);
    L.control.zoom().setPosition('bottomleft').addTo(map);
    L.marker([{{ latlon_string }}]).addTo(map)
    {% for edge in edges %}
    L.polyline({{ edge['edge'] }},{
	color: '#047',
	weight: {{ edge['weight'] }},
	opacity: 1.0
    }).addTo(map)
    {% endfor %}
}

$(document).ready(function(){
    sizeMap();
    $(window).resize(sizeMap);
    addMap({{ latlon_string }}, 14)
    $("#address").geocomplete();
});

    </script>
    
  </body>
</html>
